{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/api/v1/perm/validate-token":{"get":{"tags":["Permission control endpoints"],"summary":"Validate Token","operationId":"validate_token_api_v1_perm_validate_token_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/perm/create_permission":{"post":{"tags":["Permission control endpoints"],"summary":"Create Permission","description":"Admins are only to  access this role","operationId":"create_permission_api_v1_perm_create_permission_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/perm/get_permissions":{"get":{"tags":["Permission control endpoints"],"summary":"Get Permissions","description":"Any one can access this enpoint to see his permission, but mostly for admins class","operationId":"get_permissions_api_v1_perm_get_permissions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PermissionOut"},"type":"array","title":"Response Get Permissions Api V1 Perm Get Permissions Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/perm/my_permissions":{"get":{"tags":["Permission control endpoints"],"summary":"My Permissions","operationId":"my_permissions_api_v1_perm_my_permissions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MyPermissionsOut"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/perm/assign_permissions":{"post":{"tags":["Permission control endpoints"],"summary":"Assign Permissions To Role","operationId":"assign_permissions_to_role_api_v1_perm_assign_permissions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RolePermissionAssign"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/perm/delete_permission/{permission_id}":{"delete":{"tags":["Permission control endpoints"],"summary":"Delete Role","operationId":"delete_role_api_v1_perm_delete_permission__permission_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"permission_id","in":"path","required":true,"schema":{"type":"string","title":"Permission Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/login":{"post":{"tags":["User Managment"],"summary":"Login","operationId":"login_api_v1_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUser"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/register":{"post":{"tags":["User Managment"],"summary":"Register","operationId":"register_api_v1_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUser"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/me":{"get":{"tags":["User Managment"],"summary":"Get Users Me","operationId":"get_users_me_api_v1_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/{user_id}":{"delete":{"tags":["User Managment"],"summary":"Delete User","operationId":"delete_user_api_v1_users__user_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["User Managment"],"summary":"Update User","operationId":"update_user_api_v1_users__user_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUser"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users":{"get":{"tags":["User Managment"],"summary":"Get All Users","operationId":"get_all_users_api_v1_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserOut"},"type":"array","title":"Response Get All Users Api V1 Users Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/companies/create_company":{"post":{"tags":["Companies"],"summary":"Create New Company With Admin","description":"Creates a new company and its first super admin user.\nThis endpoint is for the main system admin.","operationId":"create_new_company_with_admin_api_v1_companies_create_company_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_create_new_company_with_admin_api_v1_companies_create_company_post"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/companies/":{"get":{"tags":["Companies"],"summary":"Get All Companies","description":"Returns a list of all companies. Accessible only by a super admin.","operationId":"get_all_companies_api_v1_companies__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CompanyResponse"},"type":"array","title":"Response Get All Companies Api V1 Companies  Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/companies/{company_id}":{"get":{"tags":["Companies"],"summary":"Get Company By Id","description":"Returns a single company by its ID. Accessible only by a super admin.","operationId":"get_company_by_id_api_v1_companies__company_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Companies"],"summary":"Delete Company","description":"This action is sudo, means super users can only do this","operationId":"delete_company_api_v1_companies__company_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/companies/{company_id}/users":{"get":{"tags":["Companies"],"summary":"Get Company Users","description":"Returns a list of users belonging to a specific company.\nThis endpoint is for company admins.","operationId":"get_company_users_api_v1_companies__company_id__users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CompanyUserResponse"},"title":"Response Get Company Users Api V1 Companies  Company Id  Users Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/companies/company-user":{"post":{"tags":["Companies"],"summary":"Create Company User","description":"Create a new user for a specific company.\nThis endpoint is for the main system admin.","operationId":"create_company_user_api_v1_companies_company_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/roles/create_role":{"post":{"tags":["Roles control endpoints"],"summary":"Create Role","description":"Admins are only to  access this role","operationId":"create_role_api_v1_roles_create_role_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/roles/all_roles":{"get":{"tags":["Roles control endpoints"],"summary":"Get All Roles","operationId":"get_all_roles_api_v1_roles_all_roles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RoleOut"},"type":"array","title":"Response Get All Roles Api V1 Roles All Roles Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/roles/delete_role/{role_id}":{"delete":{"tags":["Roles control endpoints"],"summary":"Delete Role","operationId":"delete_role_api_v1_roles_delete_role__role_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routes/register":{"post":{"tags":["Routes End Points"],"summary":"Register Routes","description":"Registers a new route, associating it with the user's company.","operationId":"register_routes_api_v1_routes_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRoute"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/routes/":{"get":{"tags":["Routes End Points"],"summary":"Get All Routes","operationId":"get_all_routes_api_v1_routes__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RouteOut"},"type":"array","title":"Response Get All Routes Api V1 Routes  Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/routes/{route_id}":{"put":{"tags":["Routes End Points"],"summary":"Update Route","description":"Updates the details of an existing route, restricted to the user's company.","operationId":"update_route_api_v1_routes__route_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Route Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoute"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoute"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Routes End Points"],"summary":"Delete Route","description":"Deletes a route, restricted to the user's company.\nPrevents deletion if the route is still referenced in bus_routes, tickets, etc.","operationId":"delete_route_api_v1_routes__route_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Route Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Routes End Points"],"summary":"Get Route","operationId":"get_route_api_v1_routes__route_id__get","parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Route Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/routes/assign-bus":{"post":{"tags":["Routes End Points"],"summary":"Assign Bus","description":"Assigns a bus to a route, ensuring both belong to the user's company.","operationId":"assign_bus_api_v1_routes_assign_bus_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignBusRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/tickets/":{"get":{"tags":["Ticket Managment Endpoint"],"summary":"Get All Tickets","description":"Retrieves a list of all tickets belonging to the user's company.","operationId":"get_all_tickets_api_v1_tickets__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TicketResponse"},"type":"array","title":"Response Get All Tickets Api V1 Tickets  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Ticket Managment Endpoint"],"summary":"Create Ticket","description":"Creates a new ticket for any user, associating it with the company based on the route.","operationId":"create_ticket_api_v1_tickets__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tickets/{ticket_id}":{"get":{"tags":["Ticket Managment Endpoint"],"summary":"Get Ticket","description":"Retrieves a single ticket by its ID, restricted to the user's company.","operationId":"get_ticket_api_v1_tickets__ticket_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Ticket Managment Endpoint"],"summary":"Delete Ticket","description":"Soft-deletes a ticket, restricted to tickets belonging to the user's company.","operationId":"delete_ticket_api_v1_tickets__ticket_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tickets/my-tickets/":{"get":{"tags":["Ticket Managment Endpoint"],"summary":"List User Tickets","description":"Lists tickets for the current authenticated user only.","operationId":"list_user_tickets_api_v1_tickets_my_tickets__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TicketResponse"},"type":"array","title":"Response List User Tickets Api V1 Tickets My Tickets  Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/tickets/{ticket_id}/status":{"patch":{"tags":["Ticket Managment Endpoint"],"summary":"Update Ticket Status","description":"Updates the status of a ticket, restricted to tickets belonging to the user's company.","operationId":"update_ticket_status_api_v1_tickets__ticket_id__status_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}},{"name":"new_status","in":"query","required":true,"schema":{"type":"string","title":"New Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TicketResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tickets/admin_delete/{ticket_id}":{"delete":{"tags":["Ticket Managment Endpoint"],"summary":"Admin Delete Ticket","description":"Permanently deletes a ticket, restricted to tickets belonging to the user's company.","operationId":"admin_delete_ticket_api_v1_tickets_admin_delete__ticket_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ticket_id","in":"path","required":true,"schema":{"type":"string","title":"Ticket Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/buses/":{"get":{"tags":["Buses"],"summary":"Get All Buses","description":"Returns a list of all buses for the current user's company.","operationId":"get_all_buses_api_v1_buses__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/BusOut"},"type":"array","title":"Response Get All Buses Api V1 Buses  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Buses"],"summary":"Create Bus","description":"Endpoint to create a new bus for the current user's company.\nRoutes are optional â€” they can be attached later.","operationId":"create_bus_api_v1_buses__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/buses/by-route/{route_id}":{"get":{"tags":["Buses"],"summary":"Get Buses By Route","description":"Returns a list of buses for a specific route, ensuring the route belongs to the user's company.","operationId":"get_buses_by_route_api_v1_buses_by_route__route_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"route_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Route Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BusOut"},"title":"Response Get Buses By Route Api V1 Buses By Route  Route Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/buses/{bus_id}":{"patch":{"tags":["Buses"],"summary":"Update Bus","description":"Updates a bus, ensuring it belongs to the user's company.","operationId":"update_bus_api_v1_buses__bus_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"bus_id","in":"path","required":true,"schema":{"type":"string","title":"Bus Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBus"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Buses"],"summary":"Delete Bus","description":"Deletes a bus, ensuring it belongs to the user's company.","operationId":"delete_bus_api_v1_buses__bus_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"bus_id","in":"path","required":true,"schema":{"type":"string","title":"Bus Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/buses/user_get_buses":{"get":{"tags":["Buses"],"summary":"Get All Buses","description":"Allows any user to see all available buses and their associated companies.","operationId":"get_all_buses_api_v1_buses_user_get_buses_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/BusWithCompanyResponse"},"type":"array","title":"Response Get All Buses Api V1 Buses User Get Buses Get"}}}}}}},"/api/v1/payments/":{"post":{"tags":["Payments"],"summary":"Initiate Payment","operationId":"initiate_payment_api_v1_payments__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/route_segments/":{"post":{"tags":["RouteSegments"],"summary":"Create Route Segment","operationId":"create_route_segment_api_v1_route_segments__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteSegmentCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteSegmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["RouteSegments"],"summary":"List Route Segments","operationId":"list_route_segments_api_v1_route_segments__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"route_id","in":"query","required":false,"schema":{"type":"string","title":"Route Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RouteSegmentResponse"},"title":"Response List Route Segments Api V1 Route Segments  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/route_segments/{segment_id}":{"get":{"tags":["RouteSegments"],"summary":"Get Route Segment","operationId":"get_route_segment_api_v1_route_segments__segment_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"segment_id","in":"path","required":true,"schema":{"type":"string","title":"Segment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteSegmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["RouteSegments"],"summary":"Update Route Segment","operationId":"update_route_segment_api_v1_route_segments__segment_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"segment_id","in":"path","required":true,"schema":{"type":"string","title":"Segment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteSegmentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RouteSegmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["RouteSegments"],"summary":"Delete Route Segment","operationId":"delete_route_segment_api_v1_route_segments__segment_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"segment_id","in":"path","required":true,"schema":{"type":"string","title":"Segment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stations/":{"get":{"tags":["Bus Stations Endpoints"],"summary":"List Stations","operationId":"list_stations_api_v1_stations__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/BusStationResponse"},"type":"array","title":"Response List Stations Api V1 Stations  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Bus Stations Endpoints"],"summary":"Create Station","operationId":"create_station_api_v1_stations__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusStationCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusStationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stations/{station_id}":{"delete":{"tags":["Bus Stations Endpoints"],"summary":"Delete Station","operationId":"delete_station_api_v1_stations__station_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"string","title":"Station Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/":{"post":{"tags":["Schedules"],"summary":"Create Schedule","operationId":"create_schedule_api_v1_schedules__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/":{"get":{"summary":"Home","description":"The home route","operationId":"home__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AssignBusRequest":{"properties":{"route_id":{"type":"string","format":"uuid","title":"Route Id"},"bus_id":{"type":"string","format":"uuid","title":"Bus Id"}},"type":"object","required":["route_id","bus_id"],"title":"AssignBusRequest"},"Body_create_new_company_with_admin_api_v1_companies_create_company_post":{"properties":{"company_data":{"$ref":"#/components/schemas/CompanyCreate"},"admin_data":{"$ref":"#/components/schemas/UserCreate"}},"type":"object","required":["company_data","admin_data"],"title":"Body_create_new_company_with_admin_api_v1_companies_create_company_post"},"BusCreate":{"properties":{"plate_number":{"type":"string","title":"Plate Number","description":"Plate number of the bus"},"capacity":{"type":"integer","title":"Capacity","description":"Seats for a certain bus"},"route_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Route Ids","description":"List of route IDs this bus will serve"}},"type":"object","required":["plate_number","capacity"],"title":"BusCreate"},"BusOut":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"plate_number":{"type":"string","title":"Plate Number"},"capacity":{"type":"integer","title":"Capacity"},"available_seats":{"type":"integer","title":"Available Seats"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"route_ids":{"items":{},"type":"array","title":"Route Ids"}},"type":"object","required":["id","plate_number","capacity","available_seats","created_at","route_ids"],"title":"BusOut"},"BusStationCreate":{"properties":{"name":{"type":"string","title":"Name"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"}},"type":"object","required":["name"],"title":"BusStationCreate"},"BusStationResponse":{"properties":{"name":{"type":"string","title":"Name"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"id":{"type":"string","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"company_id":{"type":"string","title":"Company Id"}},"type":"object","required":["name","id","created_at","company_id"],"title":"BusStationResponse"},"BusWithCompanyResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"plate_number":{"type":"string","title":"Plate Number"},"company":{"anyOf":[{"$ref":"#/components/schemas/CompanyName"},{"type":"null"}]},"available_seats":{"type":"integer","title":"Available Seats"},"capacity":{"type":"integer","title":"Capacity"}},"type":"object","required":["id","plate_number","available_seats","capacity"],"title":"BusWithCompanyResponse"},"CompanyCreate":{"properties":{"name":{"type":"string","title":"Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["name"],"title":"CompanyCreate"},"CompanyName":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"CompanyName"},"CompanyResponse":{"properties":{"name":{"type":"string","title":"Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"id":{"type":"string","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","id","created_at"],"title":"CompanyResponse"},"CompanyUserResponse":{"properties":{"id":{"type":"string","title":"Id"},"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","title":"Email"},"phone_number":{"type":"string","title":"Phone Number"},"company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Id"}},"type":"object","required":["id","full_name","email","phone_number"],"title":"CompanyUserResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginUser":{"properties":{"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"password_hash":{"type":"string","title":"Password Hash"}},"type":"object","required":["password_hash"],"title":"LoginUser"},"MyPermissionsOut":{"properties":{"permissions":{"items":{"$ref":"#/components/schemas/PermissionOut"},"type":"array","title":"Permissions"}},"type":"object","required":["permissions"],"title":"MyPermissionsOut"},"PaymentCreate":{"properties":{"ticket_id":{"type":"string","format":"uuid","title":"Ticket Id"},"phone_number":{"type":"string","title":"Phone Number"},"provider":{"$ref":"#/components/schemas/PaymentProvider"}},"type":"object","required":["ticket_id","phone_number","provider"],"title":"PaymentCreate"},"PaymentProvider":{"type":"string","enum":["momo","tigocash"],"title":"PaymentProvider"},"PaymentResponse":{"properties":{"id":{"type":"string","title":"Id"},"ticket_id":{"type":"string","title":"Ticket Id"},"user_id":{"type":"string","title":"User Id"},"phone_number":{"type":"string","title":"Phone Number"},"amount":{"type":"number","title":"Amount"},"provider":{"type":"string","title":"Provider"},"status":{"type":"string","title":"Status"}},"type":"object","required":["id","ticket_id","user_id","phone_number","amount","provider","status"],"title":"PaymentResponse"},"PermissionCreate":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"PermissionCreate"},"PermissionOut":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"PermissionOut"},"RegisterRoute":{"properties":{"origin_id":{"type":"string","format":"uuid","title":"Origin Id"},"destination_id":{"type":"string","format":"uuid","title":"Destination Id"},"price":{"type":"integer","title":"Price"},"company_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Company Id"}},"type":"object","required":["origin_id","destination_id","price"],"title":"RegisterRoute"},"RegisterUser":{"properties":{"full_name":{"type":"string","title":"Full Name"},"phone_number":{"type":"string","title":"Phone Number"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["full_name","phone_number","email","password"],"title":"RegisterUser"},"RoleCreate":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"RoleCreate"},"RoleOut":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"}},"type":"object","required":["id","name"],"title":"RoleOut"},"RolePermissionAssign":{"properties":{"role_id":{"type":"string","title":"Role Id"},"permission_id":{"type":"string","title":"Permission Id"}},"type":"object","required":["role_id","permission_id"],"title":"RolePermissionAssign"},"RouteOut":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"origin":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Origin"},"destination":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Destination"},"company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Id"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","title":"RouteOut"},"RouteSegmentCreate":{"properties":{"route_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Route Id","description":"ID of the route this segment belongs to","default":"e2568121-b871-4035-a610-81c1e684b595"},"start_station_id":{"type":"string","title":"Start Station Id","description":"ID of the starting bus station"},"end_station_id":{"type":"string","title":"End Station Id","description":"ID of the ending bus station"},"price":{"type":"number","title":"Price","description":"Price of traveling this segment"},"stop_order":{"type":"integer","title":"Stop Order","description":"The order of this segment in the route"}},"type":"object","required":["start_station_id","end_station_id","price","stop_order"],"title":"RouteSegmentCreate"},"RouteSegmentResponse":{"properties":{"id":{"type":"string","title":"Id"},"route_id":{"type":"string","title":"Route Id"},"start_station_id":{"type":"string","title":"Start Station Id"},"end_station_id":{"type":"string","title":"End Station Id"},"price":{"type":"number","title":"Price"},"stop_order":{"type":"integer","title":"Stop Order"},"company_id":{"type":"string","title":"Company Id"}},"type":"object","required":["id","route_id","start_station_id","end_station_id","price","stop_order","company_id"],"title":"RouteSegmentResponse"},"RouteSegmentUpdate":{"properties":{"start_station_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Station Id","description":"ID of the starting bus station"},"end_station_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Station Id","description":"ID of the ending bus station"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price","description":"Price of traveling this segment"},"stop_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Stop Order","description":"The order of this segment in the route"}},"type":"object","title":"RouteSegmentUpdate"},"ScheduleCreate":{"properties":{"bus_id":{"type":"string","title":"Bus Id"},"route_segment_id":{"type":"string","title":"Route Segment Id"},"departure_time":{"type":"string","format":"date-time","title":"Departure Time"},"arrival_time":{"type":"string","format":"date-time","title":"Arrival Time"}},"type":"object","required":["bus_id","route_segment_id","departure_time","arrival_time"],"title":"ScheduleCreate"},"ScheduleResponse":{"properties":{"bus_id":{"type":"string","title":"Bus Id"},"route_segment_id":{"type":"string","title":"Route Segment Id"},"departure_time":{"type":"string","format":"date-time","title":"Departure Time"},"arrival_time":{"type":"string","format":"date-time","title":"Arrival Time"},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"}},"type":"object","required":["bus_id","route_segment_id","departure_time","arrival_time","id","company_id"],"title":"ScheduleResponse"},"TicketCreate":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id","description":"ID of the user booking the ticket"},"bus_id":{"type":"string","format":"uuid","title":"Bus Id","description":"ID of the bus"},"route_id":{"type":"string","format":"uuid","title":"Route Id","description":"ID of the route"}},"type":"object","required":["user_id","bus_id","route_id"],"title":"TicketCreate"},"TicketResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"qr_code":{"type":"string","title":"Qr Code"},"status":{"type":"string","title":"Status"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"mode":{"type":"string","title":"Mode"},"route":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Route"},"bus":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bus"}},"type":"object","required":["id","qr_code","status","created_at","mode"],"title":"TicketResponse"},"UpdateBus":{"properties":{"plate_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Plate Number"},"capacity":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Capacity"},"route_ids":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Route Ids"}},"type":"object","title":"UpdateBus"},"UpdateRoute":{"properties":{"origin_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Origin Id"},"destination_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Destination Id"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","title":"UpdateRoute"},"UpdateUser":{"properties":{"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"}},"type":"object","title":"UpdateUser"},"UserCreate":{"properties":{"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","title":"Email"},"phone_number":{"type":"string","title":"Phone Number"},"password":{"type":"string","title":"Password"},"role_name":{"type":"string","title":"Role Name"},"company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Id"}},"type":"object","required":["full_name","email","phone_number","password","role_name"],"title":"UserCreate"},"UserOut":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","format":"email","title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"}},"type":"object","required":["id","full_name","email"],"title":"UserOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}